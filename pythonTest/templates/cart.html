{% extends 'navbar.html' %}
{% block body %}

<div class="container py-5">
  <h2 class="text-center fw-bold mb-4 color-AB131C">ğŸ›’ Ø³Ù„Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª</h2>

  {% if cart_items %}
    <div class="table-responsive">
      <table class="table table-bordered align-middle shadow-sm bg-white">
        <thead class="text-white background-color-AB131C">
          <tr class="text-center">
            <th>Ø§Ù„ØµÙ†Ù</th>
            <th>Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ</th>
            <th>Ø§Ù„ÙƒÙ…ÙŠØ©</th>
            <th>Ø§Ù„ØªØ®ØµÙŠØµ</th>
            <th>Ø§Ù„Ø²ÙŠØ§Ø¯Ø©</th>
            
            <th>Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ</th>
            <th>Ø­Ø°Ù</th>
          </tr>
        </thead>
        <tbody>
          {% for item in cart_items %}
            <tr>
              <td>{{ item['item_name'] }}</td>

              <td class="text-center">{{ "%.2f"|format(item['base_price']) }} Ø¯.Ø£</td>
              <td class="text-center">{{ item['quantity'] }}</td>
              <td>
                {% if item['fixed_ingredients'] %}
                  <div><strong>Ø«Ø§Ø¨Øª:</strong> {{ item['fixed_ingredients'] | join(', ') }}</div>
                {% endif %}
                {% if item['custom_options'] %}
                  <div><strong>ØªØ®ØµÙŠØµ:</strong>
                    {% for opt in item['custom_options'] %}
                      {{ opt['ingredient_name'] }}: {{ opt['option_name'] }}{% if not loop.last %}, {% endif %}
                    {% endfor %}
                  </div>
                {% endif %}
                {% if item['notes'] %}
                  <div class="small-text"><strong>Ù…Ù„Ø§Ø­Ø¸Ø§Øª:</strong> {{ item['notes'] }}</div>
                {% endif %}
              </td>
              <td class="text-center">{{ "%.2f"|format(item['extra_price']) }} Ø¯.Ø£</td>
              
              <td class="text-center">{{ "%.2f"|format(item['total_price']) }} Ø¯.Ø£</td>
              <td class="text-center">
                <form action="{{ url_for('delete_cart_item', order_detail_id=item['order_detail_id']) }}" method="post" onsubmit="return confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ø¹Ù†ØµØ±ØŸ');">
                  <button type="submit" class="btn delete-button"> Ø­Ø°Ù</button>
                </form>
              </td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>

    <div class="alert background-color-AB131C text-white text-center fw-bold fs-5 rounded-3 mt-4">
      ğŸ’° Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„ÙƒÙ„ÙŠ: {{ "%.2f"|format(total) }} Ø¯.Ø£
    </div>

    <div class="text-center mt-4 d-flex justify-content-center flex-wrap gap-3">
      <a href="{{ url_for('show_menu') }}" class="btn text-white background-color-AB131C rounded-3"> Ø±Ø¬ÙˆØ¹ Ø¥Ù„Ù‰ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©</a>
      <a href="{{ url_for('confirm_order') }}" class="btn text-white background-color-AB131C rounded-3"> ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø·Ù„Ø¨</a>
    </div>

  {% else %}
    <div class="alert alert-warning text-center mt-5">
      ğŸš« Ø§Ù„Ø³Ù„Ø© ÙØ§Ø±ØºØ© Ø­Ø§Ù„ÙŠØ§Ù‹.
    </div>
    <div class="text-center">
      <a href="{{ url_for('show_menu') }}" class="btn btn-maroon px-4 rounded-pill"> Ø±Ø¬ÙˆØ¹ Ø¥Ù„Ù‰ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©</a>
    </div>
  {% endif %}
</div>

{% endblock %}